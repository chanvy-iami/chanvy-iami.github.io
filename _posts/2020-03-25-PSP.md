---
layout: post
title: Python3爬虫实战
subtitle: 爬虫基础
date: 2020-03-25
author: Weiami
header-img: img/post-bg-2015.jpg
catalog: true
tags:
    - python spider
---

## 会话和Cookies

### 静态网页和动态网页

静态网页的内容是由HTML代码编写的，文字、图片等内容均是通过写好的HTML代码指定。

* 优点：加载速度快，编写简单
* 缺点：可维护性差，不能根据URL灵活显示内容

动态网页可以动态解析URL中的参数变化，关联数据库可动态呈现不同的页面内容。

* 动态网页可实现用户的登录与注册功能

### 无状态HTTP

HTTP的无状态是指HTTP协议对事务处理是没有记忆能力的，即服务器不知客户端什么状态。为保持HTTP连接状态，出现了会话和Cookies技术。

* 会话在服务端，用于保存用户的会话信息
* Cookies在客户端，在浏览器下次访问时，会附带Cookies发送到服务器

1.会话

网页中，会话对象用于存储特定用户会话所需的属性及配置信息。

2.Cookies

Cookies是网站为了辨别用户身份，进行会话跟踪而存储在用户本地终端的数据。

* 会话维持：客户端第一次向服务器发送请求时后，服务器会返回一个Set-Cookie字段的响应给客户端，客户端会将其记下，等下一次发送请求时会带上此字段，服务器会根据Cookies来判断用户，找到对应会话
* 属性结构：可在浏览器中查看Cookie信息
* 会话Cookie和持久Cookie：前者放在浏览器内存，关闭后失效；后者保存在客户端硬盘，下次继续使用

### 常见误区

会话机制，误区是当关闭浏览器，会话就消失了。服务器可以设置会话的失效时间。

## 代理的基本原理

在爬虫过程中，服务器会因为某个IP在单位时间内的访问次数而拒绝本IP的服务，我们通过代理来伪装IP。

### 基本原理

代理实际是代理服务器，代理网络用户取得网络信息。基本原理是在主机与服务器之间搭建一个桥，主机不向服务器直接发送请求，而是发送给代理服务器，代理服务器再发送给服务器，服务器会将响应发给代理服务器，然后转发给主机。中间的代理服务器实现了IP的伪装。

### 代理的作用

* 突破自身IP的访问限制
* 访问一些单位或者团体的内部资源
* 提高访问速度
* 隐藏真实IP

### 爬虫代理

使用代理隐藏自己真实的IP，让服务器以为代理服务器在请求自己，这样在爬取过程不断更新代理，IP就不会被封锁。

### 代理分类

1.根据协议区分

* FTP代理服务器：访问FTP服务器
* HTTP代理服务器：访问网页
* SSL/TLS 代理：访问加密网络
* RTSP代理：访问Real流媒体服务器
* Telnet代理：用于Telnet远程控制
* POP3/SMTP代理：用于POP3/STMP方式收发邮件
* SOCKS代理：只单纯传递数据包

2.根据匿名程度区分

* 高度匿名代理：转发原数据包
* 普通匿名代理：对数据包做些改动，服务器会发现代理服务器，也可能查到真实IP
* 透明代理：对数据包做改动的同时还告诉客户端的真实IP
* 间谍代理：组织或个人创建的用于记录用户传输数据，进行研究监控等代理服务器

### 常见代理设置

* 使用网上的免费代理
* 使用付费代理服务
* ADSL拨号：拨一次号换一次IP